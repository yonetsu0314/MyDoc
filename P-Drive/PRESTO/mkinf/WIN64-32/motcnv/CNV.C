/*
 *==========================================================================
 *	Filename	: CNV.C
 *--------------------------------------------------------------------------
 *	Function	: 変換関数
 *--------------------------------------------------------------------------
 *$Header: p:/tool/motcnv/RCS/CNV.C 1.1 1997-02-15 03:53:06+09 minaguchi Exp $
 *$Log: CNV.C $
 *Revision 1.1  1997-02-15 03:53:06+09  minaguchi
 *初期リビジョン
 *
 *--------------------------------------------------------------------------
 *		(c)	Copyright 1996, ISHIDA CO., LTD.
 *		959-1 SHIMOMAGARI RITTO-CHO KURITA-GUN SHIGA JAPAN
 *		TELEPHONE (0775)53-4141
 *--------------------------------------------------------------------------
 */

#include	"utype.h"
#include	"cnv.h"

/*==========================================================================
 *		関数プロトタイプ
 *--------------------------------------------------------------------------*/
static BYTE btoh( BYTE data );
static BYTE	htob( BYTE code );


/*==========================================================================
 *		１６ビット数値を４バイトＡＳＣＩＩ文字列に変換
 *--------------------------------------------------------------------------
 *	引数１: １６ビット数値
 *	引数２: ４バイトＡＳＣＩＩ文字列へのポインタ
 *	戻り値:	なし
 *--------------------------------------------------------------------------*/
void itoh( WORD data, BYTE *str )
{
	str[0] = btoh( (BYTE)(data>>12) );
	str[1] = btoh( (BYTE)(data>> 8) );
	str[2] = btoh( (BYTE)(data>> 4) );
	str[3] = btoh( (BYTE)(data)     );
}


/*==========================================================================
 *		８ビット数値を２バイトＡＳＣＩＩ文字列に変換
 *--------------------------------------------------------------------------
 *	引数１:	８ビット数値
 *	引数２:	２バイトＡＳＣＩＩ文字列へのポインタ
 *	戻り値: なし
 *--------------------------------------------------------------------------*/
void ctoh( BYTE data, BYTE *str )
{
	str[0] = btoh( (BYTE)(data>>4) );
	str[1] = btoh( (BYTE)(data)    );
}


/*==========================================================================
 *		４バイトＡＳＣＩＩ文字列を数値に変換
 *--------------------------------------------------------------------------
 *	引き数:	４バイトＡＳＣＩＩ文字列へのポインタ
 *	戻り値:	変換数値
 *--------------------------------------------------------------------------*/
WORD htoi( BYTE * buf )
{
	WORD	i = 0;
	BYTE	j;

	for( j=0; j<4; j++ ) {
		i = (i<<4) + htob( *buf );
		buf++;
	}
	return(i);
}


/*==========================================================================
 *		２バイトＡＳＣＩＩ文字列を数値に変換
 *--------------------------------------------------------------------------
 *	引き数:	２バイトＡＳＣＩＩ文字列へのポインタ
 *	戻り値:	変換数値
 *--------------------------------------------------------------------------*/
BYTE htoc( BYTE * buf )
{
	BYTE	i, j;

	i = 0;
	for( j=0; j<2; j++ ) {
		i = (BYTE)(i<<4) + htob( *buf );
		buf++;
	}
	return(i);
}


/*==========================================================================
 *		４ビット数値をＡＳＣＩＩ文字に変換
 *--------------------------------------------------------------------------
 *	引き数:	４ビット数値
 *	戻り値:	ＡＳＣＩＩ文字
 *--------------------------------------------------------------------------*/
static BYTE btoh( BYTE data )
{
	data &= 0x0F;
	if( data<10 ) {
		return( (BYTE)(data+'0') );
	}
	else {
		return( (BYTE)(data+'A'-10) );
	}
}
/*==========================================================================
 *		ＡＳＣＩＩ文字を数値に変換
 *--------------------------------------------------------------------------
 *	引き数: ＡＳＣＩＩ文字
 *	戻り値: 変換数値
 *--------------------------------------------------------------------------*/
static BYTE htob( BYTE code )
{
	if( (code>='0') && (code<='9') ) {
		return( (BYTE)(code-'0') );
	}
	else {
		return( (BYTE)(code-'A'+10) );
	}
}
/*==========================================================================*/
