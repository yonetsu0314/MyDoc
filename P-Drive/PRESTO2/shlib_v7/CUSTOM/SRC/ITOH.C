/*----------------------------------------------------------------------*
 * File name	: itoh.c	/ convert to ascii hex			*
 *----------------------------------------------------------------------*
 *$Header: p:/presto2/shlib_v7/custom/src/RCS/itoh.c 1.2 1970/01/01 00:00:00 chimura Exp $
 *$Log: itoh.c $
 * リビジョン 1.2  1970/01/01  00:00:00  chimura
 * 2003/08/12 ワーニング削除
 * 
 * リビジョン 1.1  1970/01/01  00:00:00  chimura
 * 初期リビジョン
 * 
 *----------------------------------------------------------------------*/
/*		(c) Copyright 2002, ISHIDA CO., LTD.			*/
/*		959-1 SHIMOMAGARI RITTO-CITY SHIGA JAPAN		*/
/*		(0775) 53-4141						*/
/*----------------------------------------------------------------------*/

static char
trans_ascii(
	char	data
	)
{
	if(data < 10) {
		data += '0';
	} else {
		data += 'A'-10;
	}
	return(data);
}

/*----------------------------------------------------------------------*/
/*	itoh								*/
/*----------------------------------------------------------------------*/
/* 説明                                                  		*/
/*	shortを4byteのHEX ASCIIに変換する。				*/
/*----------------------------------------------------------------------*/
/* 引き数								*/
/*	i	: short value						*/
/*	*s	: pointer to string					*/
/*									*/
/* 戻り値								*/
/*	void	: 無し							*/
/*----------------------------------------------------------------------*/
void
itoh(i,s)
	unsigned short	i;			/* converted value	*/
	char		*s;
{
	int	n;
	char	c;

	for( n = sizeof(i)*8 - 4; n >= 0; n -= 4) {
		c = (char)(i>>n);
		*(s++) = trans_ascii(c);
		i -= (short)(c<<n);
	}
}

/*----------------------------------------------------------------------*/
/*	ctoh								*/
/*----------------------------------------------------------------------*/
/* 説明                                                  		*/
/*	charを2byteのHEX ASCIIに変換する。				*/
/*----------------------------------------------------------------------*/
/* 引き数								*/
/*	i	: char value 						*/
/*	*s	: pointer to string					*/
/*									*/
/* 戻り値								*/
/*	void	: 無し							*/
/*----------------------------------------------------------------------*/
void
ctoh(
	unsigned char	i,
	char		*s
	)
{
	s[0] = trans_ascii((char)(i >> 4));
	s[1] = trans_ascii((char)(i & 0x0f));
}

/*----------------------------------------------------------------------*/
/*	ltoh								*/
/*----------------------------------------------------------------------*/
/* 説明                                                  		*/
/*	longを8byteのHEX ASCIIに変換する。				*/
/*----------------------------------------------------------------------*/
/* 引き数								*/
/*	l	: long value						*/
/*	*s	: pointer to string					*/
/*									*/
/* 戻り値								*/
/*	void	: 無し							*/
/*----------------------------------------------------------------------*/
void
ltoh(
	unsigned long	l,
	char		*s
	)
{
	int	n;
	char	c;

	for(n = sizeof(l)*8 - 4;n >= 0;n -= 4) {
		c = (char)(l >> n);
		*(s++) = trans_ascii(c);
		l -= (unsigned long)c << n;
	}
}
