/*==========================================================================
 * Filename	: INTCTRL.C
 * Original	: p:/dacs_i/sh2lib/custom/src/rcs/intctrl.c 1.1
 *--------------------------------------------------------------------------
 * Function	: 割込制御
 *--------------------------------------------------------------------------
 *$Header: p:/presto2/shlib_v7/custom/src/RCS/intctrl.c 1.1 1970/01/01 00:00:00 chimura Exp $
 *$Log: intctrl.c $
 * リビジョン 1.1  1970/01/01  00:00:00  chimura
 * 初期リビジョン
 * 
 *--------------------------------------------------------------------------
 *		(c) Copyright 2002, ISHIDA CO., LTD.
 *		959-1 SHIMOMAGARI RITTO-CITY SHIGA JAPAN
 *		(077) 553-4141
 *==========================================================================
 */

#include	<machine.h>

static unsigned int	imask_bak;
static unsigned int	ccr_bak;

/*==========================================================================
 *		局所的割込禁止
 *--------------------------------------------------------------------------
 *	引き数:	なし
 *	戻り値:	なし
 *--------------------------------------------------------------------------*/
void local_disable( void )
{
	imask_bak = get_imask();
	set_imask(15);
}

/*==========================================================================
 *		局所的割込許可
 *--------------------------------------------------------------------------
 *	引き数:	なし
 *	戻り値:	なし
 *--------------------------------------------------------------------------*/
void local_enable( void )
{
	set_imask( (int)imask_bak );
}

/*==========================================================================
 *		局所的全割込禁止
 *--------------------------------------------------------------------------
 *	引き数:	なし
 *	戻り値:	なし
 *--------------------------------------------------------------------------*/
void local_disable_all( void )
{
	ccr_bak = get_cr();
	set_cr( (int)ccr_bak | 0x00F0 );
}

/*==========================================================================
 *		局所的全割込許可
 *--------------------------------------------------------------------------
 *	引き数:	なし
 *	戻り値:	なし
 *--------------------------------------------------------------------------*/
void local_enable_all( void )
{
	set_cr( get_cr() & 0x0F );
	set_cr( get_cr() | 0xF0 );
}

/*==========================================================================*/
